// Code generated by cmd/tools/genvisitor. DO NOT EDIT.
package compat

import (
	apicommand "github.com/temporalio/s2s-proxy/proto/1_22/api/command/v1"
	apifailure "github.com/temporalio/s2s-proxy/proto/1_22/api/failure/v1"
	apihistory "github.com/temporalio/s2s-proxy/proto/1_22/api/history/v1"
	apiupdate "github.com/temporalio/s2s-proxy/proto/1_22/api/update/v1"
	apiworkflow "github.com/temporalio/s2s-proxy/proto/1_22/api/workflow/v1"
	apiworkflowservice "github.com/temporalio/s2s-proxy/proto/1_22/api/workflowservice/v1"
	serverapiadminservice "github.com/temporalio/s2s-proxy/proto/1_22/server/api/adminservice/v1"
	serverapihistory "github.com/temporalio/s2s-proxy/proto/1_22/server/api/history/v1"
	serverapipersistence "github.com/temporalio/s2s-proxy/proto/1_22/server/api/persistence/v1"
	serverapireplication "github.com/temporalio/s2s-proxy/proto/1_22/server/api/replication/v1"
)

func RepairInvalidUTF8(vAny any) (ret bool, retErr error) {
	switch root := vAny.(type) {
	case *apicommand.Command:
		switch oneof := root.GetAttributes().(type) {
		case *apicommand.Command_ContinueAsNewWorkflowExecutionCommandAttributes:
			x1 := oneof.ContinueAsNewWorkflowExecutionCommandAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apicommand.Command_FailWorkflowExecutionCommandAttributes:
			x1 := oneof.FailWorkflowExecutionCommandAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apicommand.Command_RecordMarkerCommandAttributes:
			x1 := oneof.RecordMarkerCommandAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apicommand.ContinueAsNewWorkflowExecutionCommandAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apicommand.FailWorkflowExecutionCommandAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apicommand.RecordMarkerCommandAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apifailure.Failure:
		if changed, err := repairInvalidUTF8InFailure(root); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.ActivityTaskFailedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.ActivityTaskStartedEventAttributes:
		y1 := root.GetLastFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.ActivityTaskTimedOutEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.ChildWorkflowExecutionFailedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.History:
		for _, item1 := range root.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y1 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y1 := x1.GetOutcome()
				switch oneof := y1.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apihistory.HistoryEvent:
		switch oneof := root.GetAttributes().(type) {
		case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
			x1 := oneof.ActivityTaskFailedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
			x1 := oneof.ActivityTaskStartedEventAttributes
			y1 := x1.GetLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
			x1 := oneof.ActivityTaskTimedOutEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
			x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
			x1 := oneof.MarkerRecordedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
			x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
			x1 := oneof.WorkflowExecutionFailedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
			x1 := oneof.WorkflowExecutionStartedEventAttributes
			y1 := x1.GetContinuedFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
			x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
			y1 := x1.GetOutcome()
			switch oneof := y1.GetValue().(type) {
			case *apiupdate.Outcome_Failure:
				x2 := oneof.Failure
				if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
			x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
			x1 := oneof.WorkflowTaskFailedEventAttributes
			y1 := x1.GetFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apihistory.MarkerRecordedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.WorkflowExecutionContinuedAsNewEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.WorkflowExecutionFailedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.WorkflowExecutionStartedEventAttributes:
		y1 := root.GetContinuedFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.WorkflowExecutionUpdateCompletedEventAttributes:
		y1 := root.GetOutcome()
		switch oneof := y1.GetValue().(type) {
		case *apiupdate.Outcome_Failure:
			x1 := oneof.Failure
			if changed, err := repairInvalidUTF8InFailure(x1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apihistory.WorkflowExecutionUpdateRejectedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apihistory.WorkflowTaskFailedEventAttributes:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiupdate.Outcome:
		switch oneof := root.GetValue().(type) {
		case *apiupdate.Outcome_Failure:
			x1 := oneof.Failure
			if changed, err := repairInvalidUTF8InFailure(x1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiupdate.Rejection:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiupdate.Response:
		y1 := root.GetOutcome()
		switch oneof := y1.GetValue().(type) {
		case *apiupdate.Outcome_Failure:
			x1 := oneof.Failure
			if changed, err := repairInvalidUTF8InFailure(x1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiworkflow.PendingActivityInfo:
		y1 := root.GetLastFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiworkflowservice.DescribeWorkflowExecutionResponse:
		for _, item1 := range root.GetPendingActivities() {
			y1 := item1.GetLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiworkflowservice.GetWorkflowExecutionHistoryResponse:
		y1 := root.GetHistory()
		for _, item1 := range y1.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y2 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y2 := x1.GetOutcome()
				switch oneof := y2.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.GetWorkflowExecutionHistoryReverseResponse:
		y1 := root.GetHistory()
		for _, item1 := range y1.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y2 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y2 := x1.GetOutcome()
				switch oneof := y2.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.PollWorkflowExecutionUpdateResponse:
		y1 := root.GetOutcome()
		switch oneof := y1.GetValue().(type) {
		case *apiupdate.Outcome_Failure:
			x1 := oneof.Failure
			if changed, err := repairInvalidUTF8InFailure(x1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiworkflowservice.PollWorkflowTaskQueueResponse:
		y1 := root.GetHistory()
		for _, item1 := range y1.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y2 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y2 := x1.GetOutcome()
				switch oneof := y2.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.RespondActivityTaskFailedByIdRequest:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiworkflowservice.RespondActivityTaskFailedByIdResponse:
		for _, item1 := range root.GetFailures() {
			if changed, err := repairInvalidUTF8InFailure(item1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiworkflowservice.RespondActivityTaskFailedRequest:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiworkflowservice.RespondActivityTaskFailedResponse:
		for _, item1 := range root.GetFailures() {
			if changed, err := repairInvalidUTF8InFailure(item1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *apiworkflowservice.RespondWorkflowTaskCompletedRequest:
		for _, item1 := range root.GetCommands() {
			switch oneof := item1.GetAttributes().(type) {
			case *apicommand.Command_ContinueAsNewWorkflowExecutionCommandAttributes:
				x1 := oneof.ContinueAsNewWorkflowExecutionCommandAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apicommand.Command_FailWorkflowExecutionCommandAttributes:
				x1 := oneof.FailWorkflowExecutionCommandAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apicommand.Command_RecordMarkerCommandAttributes:
				x1 := oneof.RecordMarkerCommandAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.RespondWorkflowTaskCompletedResponse:
		y1 := root.GetWorkflowTask()
		y2 := y1.GetHistory()
		for _, item1 := range y2.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y3 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y3 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y3 := x1.GetOutcome()
				switch oneof := y3.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.RespondWorkflowTaskFailedRequest:
		y1 := root.GetFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiworkflowservice.StartWorkflowExecutionRequest:
		y1 := root.GetContinuedFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *apiworkflowservice.StartWorkflowExecutionResponse:
		y1 := root.GetEagerWorkflowTask()
		y2 := y1.GetHistory()
		for _, item1 := range y2.GetEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y3 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y3 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y3 := x1.GetOutcome()
				switch oneof := y3.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *apiworkflowservice.UpdateWorkflowExecutionResponse:
		y1 := root.GetOutcome()
		switch oneof := y1.GetValue().(type) {
		case *apiupdate.Outcome_Failure:
			x1 := oneof.Failure
			if changed, err := repairInvalidUTF8InFailure(x1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
	case *serverapiadminservice.DescribeMutableStateResponse:
		y1 := root.GetCacheMutableState()
		for _, val1 := range y1.GetActivityInfos() {
			y2 := val1.GetRetryLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
		for _, item1 := range y1.GetBufferedEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y2 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y2 := x1.GetOutcome()
				switch oneof := y2.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
		y2 := root.GetDatabaseMutableState()
		for _, val1 := range y2.GetActivityInfos() {
			y3 := val1.GetRetryLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
		for _, item1 := range y2.GetBufferedEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y3 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y3 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y3 := x1.GetOutcome()
				switch oneof := y3.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y3 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *serverapiadminservice.GetDLQMessagesResponse:
		for _, item1 := range root.GetReplicationTasks() {
			switch oneof := item1.GetAttributes().(type) {
			case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
				x1 := oneof.SyncActivityTaskAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
				x1 := oneof.SyncWorkflowStateTaskAttributes
				y1 := x1.GetWorkflowState()
				for _, val1 := range y1.GetActivityInfos() {
					y2 := val1.GetRetryLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
				for _, item2 := range y1.GetBufferedEvents() {
					switch oneof := item2.GetAttributes().(type) {
					case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
						x2 := oneof.ActivityTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
						x2 := oneof.ActivityTaskStartedEventAttributes
						y2 := x2.GetLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
						x2 := oneof.ActivityTaskTimedOutEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
						x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
						x2 := oneof.MarkerRecordedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
						x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
						x2 := oneof.WorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
						x2 := oneof.WorkflowExecutionStartedEventAttributes
						y2 := x2.GetContinuedFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
						y2 := x2.GetOutcome()
						switch oneof := y2.GetValue().(type) {
						case *apiupdate.Outcome_Failure:
							x3 := oneof.Failure
							if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
						x2 := oneof.WorkflowTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				}
			}
		}
	case *serverapiadminservice.GetDLQReplicationMessagesResponse:
		for _, item1 := range root.GetReplicationTasks() {
			switch oneof := item1.GetAttributes().(type) {
			case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
				x1 := oneof.SyncActivityTaskAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
				x1 := oneof.SyncWorkflowStateTaskAttributes
				y1 := x1.GetWorkflowState()
				for _, val1 := range y1.GetActivityInfos() {
					y2 := val1.GetRetryLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
				for _, item2 := range y1.GetBufferedEvents() {
					switch oneof := item2.GetAttributes().(type) {
					case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
						x2 := oneof.ActivityTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
						x2 := oneof.ActivityTaskStartedEventAttributes
						y2 := x2.GetLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
						x2 := oneof.ActivityTaskTimedOutEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
						x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
						x2 := oneof.MarkerRecordedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
						x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
						x2 := oneof.WorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
						x2 := oneof.WorkflowExecutionStartedEventAttributes
						y2 := x2.GetContinuedFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
						y2 := x2.GetOutcome()
						switch oneof := y2.GetValue().(type) {
						case *apiupdate.Outcome_Failure:
							x3 := oneof.Failure
							if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
						x2 := oneof.WorkflowTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				}
			}
		}
	case *serverapiadminservice.GetNamespaceReplicationMessagesResponse:
		y1 := root.GetMessages()
		for _, item1 := range y1.GetReplicationTasks() {
			switch oneof := item1.GetAttributes().(type) {
			case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
				x1 := oneof.SyncActivityTaskAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
				x1 := oneof.SyncWorkflowStateTaskAttributes
				y2 := x1.GetWorkflowState()
				for _, val1 := range y2.GetActivityInfos() {
					y3 := val1.GetRetryLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
				for _, item2 := range y2.GetBufferedEvents() {
					switch oneof := item2.GetAttributes().(type) {
					case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
						x2 := oneof.ActivityTaskFailedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
						x2 := oneof.ActivityTaskStartedEventAttributes
						y3 := x2.GetLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
						x2 := oneof.ActivityTaskTimedOutEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
						x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
						x2 := oneof.MarkerRecordedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
						x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
						x2 := oneof.WorkflowExecutionFailedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
						x2 := oneof.WorkflowExecutionStartedEventAttributes
						y3 := x2.GetContinuedFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
						y3 := x2.GetOutcome()
						switch oneof := y3.GetValue().(type) {
						case *apiupdate.Outcome_Failure:
							x3 := oneof.Failure
							if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
						x2 := oneof.WorkflowTaskFailedEventAttributes
						y3 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				}
			}
		}
	case *serverapiadminservice.GetReplicationMessagesResponse:
		for _, val1 := range root.GetShardMessages() {
			for _, item1 := range val1.GetReplicationTasks() {
				switch oneof := item1.GetAttributes().(type) {
				case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
					x1 := oneof.SyncActivityTaskAttributes
					y1 := x1.GetLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
					x1 := oneof.SyncWorkflowStateTaskAttributes
					y1 := x1.GetWorkflowState()
					for _, val2 := range y1.GetActivityInfos() {
						y2 := val2.GetRetryLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
					for _, item2 := range y1.GetBufferedEvents() {
						switch oneof := item2.GetAttributes().(type) {
						case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
							x2 := oneof.ActivityTaskFailedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
							x2 := oneof.ActivityTaskStartedEventAttributes
							y2 := x2.GetLastFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
							x2 := oneof.ActivityTaskTimedOutEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
							x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
							x2 := oneof.MarkerRecordedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
							x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
							x2 := oneof.WorkflowExecutionFailedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
							x2 := oneof.WorkflowExecutionStartedEventAttributes
							y2 := x2.GetContinuedFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
							x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
							y2 := x2.GetOutcome()
							switch oneof := y2.GetValue().(type) {
							case *apiupdate.Outcome_Failure:
								x3 := oneof.Failure
								if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
									ret = ret || changed
									if err != nil {
										retErr = err
									}
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
							x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
							x2 := oneof.WorkflowTaskFailedEventAttributes
							y2 := x2.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					}
				}
			}
		}
	case *serverapiadminservice.StreamWorkflowReplicationMessagesResponse:
		switch oneof := root.GetAttributes().(type) {
		case *serverapiadminservice.StreamWorkflowReplicationMessagesResponse_Messages:
			x1 := oneof.Messages
			for _, item1 := range x1.GetReplicationTasks() {
				switch oneof := item1.GetAttributes().(type) {
				case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
					x2 := oneof.SyncActivityTaskAttributes
					y1 := x2.GetLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
					x2 := oneof.SyncWorkflowStateTaskAttributes
					y1 := x2.GetWorkflowState()
					for _, val1 := range y1.GetActivityInfos() {
						y2 := val1.GetRetryLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
					for _, item2 := range y1.GetBufferedEvents() {
						switch oneof := item2.GetAttributes().(type) {
						case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
							x3 := oneof.ActivityTaskFailedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
							x3 := oneof.ActivityTaskStartedEventAttributes
							y2 := x3.GetLastFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
							x3 := oneof.ActivityTaskTimedOutEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
							x3 := oneof.ChildWorkflowExecutionFailedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
							x3 := oneof.MarkerRecordedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
							x3 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
							x3 := oneof.WorkflowExecutionFailedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
							x3 := oneof.WorkflowExecutionStartedEventAttributes
							y2 := x3.GetContinuedFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
							x3 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
							y2 := x3.GetOutcome()
							switch oneof := y2.GetValue().(type) {
							case *apiupdate.Outcome_Failure:
								x4 := oneof.Failure
								if changed, err := repairInvalidUTF8InFailure(x4); err != nil || changed {
									ret = ret || changed
									if err != nil {
										retErr = err
									}
								}
							}
						case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
							x3 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
							x3 := oneof.WorkflowTaskFailedEventAttributes
							y2 := x3.GetFailure()
							if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					}
				}
			}
		}
	case *serverapihistory.TransientWorkflowTaskInfo:
		for _, item1 := range root.GetHistorySuffix() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y1 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y1 := x1.GetOutcome()
				switch oneof := y1.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *serverapipersistence.ActivityInfo:
		y1 := root.GetRetryLastFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *serverapipersistence.WorkflowMutableState:
		for _, val1 := range root.GetActivityInfos() {
			y1 := val1.GetRetryLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
		for _, item1 := range root.GetBufferedEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y1 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y1 := x1.GetOutcome()
				switch oneof := y1.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y1 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *serverapireplication.ReplicationMessages:
		for _, item1 := range root.GetReplicationTasks() {
			switch oneof := item1.GetAttributes().(type) {
			case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
				x1 := oneof.SyncActivityTaskAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
				x1 := oneof.SyncWorkflowStateTaskAttributes
				y1 := x1.GetWorkflowState()
				for _, val1 := range y1.GetActivityInfos() {
					y2 := val1.GetRetryLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
				for _, item2 := range y1.GetBufferedEvents() {
					switch oneof := item2.GetAttributes().(type) {
					case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
						x2 := oneof.ActivityTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
						x2 := oneof.ActivityTaskStartedEventAttributes
						y2 := x2.GetLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
						x2 := oneof.ActivityTaskTimedOutEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
						x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
						x2 := oneof.MarkerRecordedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
						x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
						x2 := oneof.WorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
						x2 := oneof.WorkflowExecutionStartedEventAttributes
						y2 := x2.GetContinuedFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
						y2 := x2.GetOutcome()
						switch oneof := y2.GetValue().(type) {
						case *apiupdate.Outcome_Failure:
							x3 := oneof.Failure
							if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
						x2 := oneof.WorkflowTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				}
			}
		}
	case *serverapireplication.ReplicationTask:
		switch oneof := root.GetAttributes().(type) {
		case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
			x1 := oneof.SyncActivityTaskAttributes
			y1 := x1.GetLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
			x1 := oneof.SyncWorkflowStateTaskAttributes
			y1 := x1.GetWorkflowState()
			for _, val1 := range y1.GetActivityInfos() {
				y2 := val1.GetRetryLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
			for _, item1 := range y1.GetBufferedEvents() {
				switch oneof := item1.GetAttributes().(type) {
				case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
					x2 := oneof.ActivityTaskFailedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
					x2 := oneof.ActivityTaskStartedEventAttributes
					y2 := x2.GetLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
					x2 := oneof.ActivityTaskTimedOutEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
					x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
					x2 := oneof.MarkerRecordedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
					x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
					x2 := oneof.WorkflowExecutionFailedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
					x2 := oneof.WorkflowExecutionStartedEventAttributes
					y2 := x2.GetContinuedFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
					x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
					y2 := x2.GetOutcome()
					switch oneof := y2.GetValue().(type) {
					case *apiupdate.Outcome_Failure:
						x3 := oneof.Failure
						if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
					x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
					x2 := oneof.WorkflowTaskFailedEventAttributes
					y2 := x2.GetFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			}
		}
	case *serverapireplication.SyncActivityTaskAttributes:
		y1 := root.GetLastFailure()
		if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
			ret = ret || changed
			if err != nil {
				retErr = err
			}
		}
	case *serverapireplication.SyncWorkflowStateTaskAttributes:
		y1 := root.GetWorkflowState()
		for _, val1 := range y1.GetActivityInfos() {
			y2 := val1.GetRetryLastFailure()
			if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
				ret = ret || changed
				if err != nil {
					retErr = err
				}
			}
		}
		for _, item1 := range y1.GetBufferedEvents() {
			switch oneof := item1.GetAttributes().(type) {
			case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
				x1 := oneof.ActivityTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
				x1 := oneof.ActivityTaskStartedEventAttributes
				y2 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
				x1 := oneof.ActivityTaskTimedOutEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
				x1 := oneof.ChildWorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
				x1 := oneof.MarkerRecordedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
				x1 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
				x1 := oneof.WorkflowExecutionFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
				x1 := oneof.WorkflowExecutionStartedEventAttributes
				y2 := x1.GetContinuedFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
				y2 := x1.GetOutcome()
				switch oneof := y2.GetValue().(type) {
				case *apiupdate.Outcome_Failure:
					x2 := oneof.Failure
					if changed, err := repairInvalidUTF8InFailure(x2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
			case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
				x1 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
				x1 := oneof.WorkflowTaskFailedEventAttributes
				y2 := x1.GetFailure()
				if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			}
		}
	case *serverapireplication.WorkflowReplicationMessages:
		for _, item1 := range root.GetReplicationTasks() {
			switch oneof := item1.GetAttributes().(type) {
			case *serverapireplication.ReplicationTask_SyncActivityTaskAttributes:
				x1 := oneof.SyncActivityTaskAttributes
				y1 := x1.GetLastFailure()
				if changed, err := repairInvalidUTF8InFailure(y1); err != nil || changed {
					ret = ret || changed
					if err != nil {
						retErr = err
					}
				}
			case *serverapireplication.ReplicationTask_SyncWorkflowStateTaskAttributes:
				x1 := oneof.SyncWorkflowStateTaskAttributes
				y1 := x1.GetWorkflowState()
				for _, val1 := range y1.GetActivityInfos() {
					y2 := val1.GetRetryLastFailure()
					if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
						ret = ret || changed
						if err != nil {
							retErr = err
						}
					}
				}
				for _, item2 := range y1.GetBufferedEvents() {
					switch oneof := item2.GetAttributes().(type) {
					case *apihistory.HistoryEvent_ActivityTaskFailedEventAttributes:
						x2 := oneof.ActivityTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskStartedEventAttributes:
						x2 := oneof.ActivityTaskStartedEventAttributes
						y2 := x2.GetLastFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ActivityTaskTimedOutEventAttributes:
						x2 := oneof.ActivityTaskTimedOutEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_ChildWorkflowExecutionFailedEventAttributes:
						x2 := oneof.ChildWorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_MarkerRecordedEventAttributes:
						x2 := oneof.MarkerRecordedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionContinuedAsNewEventAttributes:
						x2 := oneof.WorkflowExecutionContinuedAsNewEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionFailedEventAttributes:
						x2 := oneof.WorkflowExecutionFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionStartedEventAttributes:
						x2 := oneof.WorkflowExecutionStartedEventAttributes
						y2 := x2.GetContinuedFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateCompletedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateCompletedEventAttributes
						y2 := x2.GetOutcome()
						switch oneof := y2.GetValue().(type) {
						case *apiupdate.Outcome_Failure:
							x3 := oneof.Failure
							if changed, err := repairInvalidUTF8InFailure(x3); err != nil || changed {
								ret = ret || changed
								if err != nil {
									retErr = err
								}
							}
						}
					case *apihistory.HistoryEvent_WorkflowExecutionUpdateRejectedEventAttributes:
						x2 := oneof.WorkflowExecutionUpdateRejectedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					case *apihistory.HistoryEvent_WorkflowTaskFailedEventAttributes:
						x2 := oneof.WorkflowTaskFailedEventAttributes
						y2 := x2.GetFailure()
						if changed, err := repairInvalidUTF8InFailure(y2); err != nil || changed {
							ret = ret || changed
							if err != nil {
								retErr = err
							}
						}
					}
				}
			}
		}
	}
	return
}
